<!DOCTYPE html>
<html lang="en" ng-app>

<head>
    <meta charset="utf-8">
    <title>powerapp - Test the powerstub</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.5/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular-route.min.js"></script>

    <!--  <script src="/assets/js/json2.js"></script>
      <script src="/assets/js/jquery.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="/assets/js/underscore.js"></script>
    <script src="/assets/js/backbone.js"></script>
    <script src="/assets/js/backbone.localStorage.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" ></script>

    <link rel="stylesheet" type="text/css" href='css/sst-landing.css'>


    <!-- application scripts -->
    <!--     <script src="app/js/app.js"></script>
    <script src="app/js/controllers.js"></script> -->

    <!-- templates -->
    <script src="views/AccountBillSummary.html"></script>

</head>
<body>
<div id="websiteapp">
    <div class="container" id="main">
        <div class="col-xs-hidden col-md-3">Side Menu</div>
        <div class="col-xs-12 col-md-9">
            <div class="row bill-summary-block">
                <h2 class="section-header section-header-billing">Bill Summary</h2>
                <div class="col-xs-12">
                    <div class="col-md-4 pay-now ">
                        <div>
                            <label>Name:</label>
                            <input type="text" ng-model="yourName" placeholder="Enter a name here">
                            <hr>
                            <h1>Hello {{yourName}}!</h1>
                        </div>
                        <div ng-view></div>
                        <div id="billsummary-div"></div>
                    </div>
                    <!--	    <div class="col-md-4 pay-now "> <div w3-include-html="/samplebillsummary.html"></div> </div> -->
                    <div class="col-md-8"><img class="img-responsive" src="images/billtrend.png"></div>
                </div>
            </div>  <!--       bill-summary-block -->
            <h2 class="section-header section-header-energy">Energy Summary</h2>


        </div> <!-- main column -->
    </div> <!-- container -->

    <div id="id01"></div>


    <script>

        w3IncludeHTML();

        var xmlhttp = new XMLHttpRequest();
        //var url = "myTutorials.txt";
        var url = "http://powerstub.killamsolutions.ca/oam/user/getJsonAccountOverview.php";


        xmlhttp.onreadystatechange = function () {
            //window.alert(xmlhttp.status)
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("id01").innerHTML = xmlhttp.responseText;
                var myArr = JSON.parse(xmlhttp.responseText);
                //window.alert(myArr )
                //myLocalFileFunction(myArr);
                myHttpBinFunction(myArr);
            }
        };
        xmlhttp.open("GET", url, true);
        //xmlhttp.send();

        function myLocalFileFunction(arr) {
            var out = "";
            var i;
            for (i = 0; i < arr.length; i++) {
                out += '<a href="' + arr[i].url + '">' +
                        arr[i].display + '</a><br>';
            }
//    document.getElementById("id01").innerHTML = out;
        }

        function myHttpBinFunction(arr) {
            var out = "";
            out += "currentBalance: " + arr.currentBalance + "<br>";
            out += "lastStatementDate: " + arr.lastStatementDate + "<br>";
            out += "premises: " + arr.premises[0].addressLine1 + "<br>" + arr.premises[0].addressLine2 + "<br>" + arr.premises[0].addressLine3;


            // document.getElementById("id01").innerHTML = out;
        }


    </script>
</div>
<?-- div id="websiteapp" -->


<script type="text/template" id="billsummary-template">
    <div class="col-sm-6 col-md-12 col-no-gutter">
        <p data-ui="overdue" class="overdue"></p>
        <h3 id="responsive_h3" class="bigtext"><span data-ui="currentBalance" class="bigtext-line0"><sup
                class="currency">$</sup>0.00</span></h3>
        <p class="due-date">Due: <span data-ui="dueDate">May 2, 2016</span></p>
        <span class="hidden" data-ui="selectedAcctValue" id="selectedAcctId">5383990830</span>
        <span class="hidden" data-ui="showPromoBox" id="showPromoBoxId">false</span>
        <a class="btn btn-primary" href="payBillFromOverview.req" data-ui="payNowButton"
           data-modal="[data-ui=&quot;payNowWarningModal&quot;]" onmouseover="this.style.color=&quot;#a11011&quot;"
           onmouseout="this.style.color=&quot;#ffffff&quot;" onclick="virtualTitlePay()"
           style="color: rgb(255, 255, 255);">Pay Now</a>
        <!--<p class="payment-info">Last Payment of <span data-ui="lastPaymentAmt"></span> paid on <br class="visible-sm"><span data-ui="lastPaymentDate"></span></p>-->
        <p id="nextScheduledPaymentDateInfo" class="payment-info hidden" paymentinfo="paymentDetails">Payment of <span
                data-ui="nextSchedPaymentAmt"><sup class="currency">$</sup>0.00</span> <span id="nextSchedStatus"
                                                                                             data-ui="nextSchedStatus">null</span>
            <span data-ui="nextSchedPaymentDate"> for <br class="visible-sm"><span>January 1, 1970</span></span></p>

        <p id="lastPaymentDateInfo" class="payment-info" paymentinfo="paymentDetails">Last Payment of <span
                data-ui="lastPaymentAmt"><sup class="currency">$</sup>78.75</span><span data-ui="lastPaymentDate"> paid on <br
                class="visible-sm"><span>May 2, 2016</span></span></p>

        <span class="hidden" data-ui="hasManySchedPayments" id="hasManySchedPayments">0</span>
        <div id="paymentSched-div" class="visible-sm visible-md visible-lg">
            <p id="singlePaymentSched" paymentinfo="paymentDetails" class="hidden"><a
                    href="/oam/user/currentebill.req#paymentSchedSection">Payment Schedule</a></p>
            <p style="width:70%;" id="muliplePaymentSched" paymentinfo="paymentDetails" class="hidden">Multiple payments
                are scheduled - <a href="/oam/user/currentebill.req#paymentSchedSection">View details</a></p>
            <p id="noPaymentSchedule" paymentinfo="paymentDetails" class=""><a href="/oam/user/currentebill.req">Current
                Bill</a></p>
        </div>
        <div id="paymentSched-div" class="visible-xs">
            <p id="singlePaymentSchedMobile" paymentinfo="paymentDetails" class="hidden"><a
                    href="/oam/user/currentebill.req#paymentSchedSectionMobile">Payment Schedule</a></p>
            <p style="width:58%;" id="muliplePaymentSchedMobile" paymentinfo="paymentDetails" class="hidden">Multiple
                payments are scheduled - <a href="/oam/user/currentebill.req#paymentSchedSectionMobile">View details</a>
            </p>
            <p id="noPaymentScheduleMobile" paymentinfo="paymentDetails" class=""><a
                    href="/oam/user/currentebill.req#summaryOfStatementMobile">Current Bill</a></p>
        </div>
        <ul class="bill-links visible-xs list-unstyled">
            <li><a href="/oam/user/currentebill.req#billHistoryListMobile">View Bill History</a></li>
        </ul>
    </div>
    <div class="bill-programs col-sm-6 col-md-12 clearfix">
        <h4>Program Opportunities</h4>
        <div data-ui="programsList">
            <div class="col-md-12 stacked col-xs-12 program">
                <div class="program-element"><a href="/oam/user/ampProgramDetails.req">Averaged Monthly Payment</a>
                </div>
            </div>
        </div>
    </div>
</script>

<div w3-include-html="views/AccountBillSummary.html"></div>

</body>
</html>
